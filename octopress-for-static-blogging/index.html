<!DOCTYPE html> <html lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Octopress For Static Blogging &middot; Going The Wong Way </title> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/syntax.css"> <link rel="stylesheet" href="/public/css/lanyon.css"> <link rel="stylesheet" href="/public/css/gallery.css"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400"> <link rel="shortcut icon" href="/favicon.ico"> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <script>var _gaq=[["_setAccount",""],["_trackPageview"]],disqus_shortname="goingthewongway",disqus_identifier="http://www.goingthewongway.com/octopress-for-static-blogging/",sc_project=2375202,sc_invisible=1,sc_security="1b55b1d6";function a(e){var g=document,f=g.createElement("script");f.async=true;f.src=e;g.getElementsByTagName("head")[0].appendChild(f);}a("//www.google-analytics.com/ga.js");</script> </head> <body class=""> <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"> <div class="sidebar" id="sidebar"> <div class="sidebar-item"> <p>Derek Wong's blog. A combination of images and thoughts from a software engineer in southern California. </p> </div> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/about/">About</a> <a class="sidebar-nav-item" href="/favorite-posts/">My Favorite Posts</a> <span class="sidebar-nav-item">Currently v1.0.0</span> </nav> <div class="sidebar-item"> <p> &copy; 2007 - 2016. All rights reserved. </p> </div> </div> <div class="wrap"> <div class="masthead"> <div class="container"> <h3 class="masthead-title"> <a href="/" title="Home">Going The Wong Way</a> <small>I'm ALWAYS going the Wong way</small> </h3> </div> </div> <div class="content"> <div class="container"> <div class="post"> <h1 class="post-title">Octopress For Static Blogging</h1> <span class="post-date">Oct 6</span> <p>Thank you, <a href="http://wordpress.org">Wordpress</a>. You were fantastic to me for over 5 years, but I’m moving on to something new. In efforts to keep things fresh, learn something new, and improve the performance of this blog, I am starting to blog with <a href="http://octopress.org">Octopress</a>, which is a blogging platform built on <a href="http://jekyllrb.com/">Jekyll</a>.</p> <p>The advantages of this system include (but are not limited to):</p> <ul> <li>It serves static web pages so it’s <em>fast</em>.</li> <li><a href="https://github.com">GitHub</a> offers built-in support so my blog is now in proper source control and hosted for free!</li> <li>The completed website is generated on my machine and pushed to a webserver so I could easily move webhosts at any time.</li> </ul> <p>There are plenty of write-ups about transitioning to a Jekyll-powered blog. Namely I used <a href="https://github.com/thomasf/exitwp">exitwp</a> to extract the posts.</p> <p>Octopress includes a pretty decent stylesheet, which made it easy to get up and writing. However, I ended up customizing it that my blog would not look like all of the other Octopress-powered websites out there. Some of the things that I added were:</p> <ul> <li><a href="#sitemap">Sitemap</a></li> <li><a href="#atom">Atom Feed</a></li> <li><a href="#sidebar_state">Retaining sidebar collapsed state</a></li> </ul> <h2 id="a-idsitemapasitemap"><a id="sitemap"></a>Sitemap</h2> <p>Octopress included a sitemap plugin, but I didn’t like that it used the file modification time. In theory that works great, but for some reason it always showed every post with the exact same modification time. So I just created my own:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"> 
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;?xml-stylesheet type="text/xsl" href="/sitemap.xsl"?&gt;</span>
<span class="nt">&lt;urlset</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"</span> <span class="na">xmlns=</span><span class="s">"http://www.sitemaps.org/schemas/sitemap/0.9"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}/<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;lastmod&gt;</span>{{ site.time | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>daily<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>1.0<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}/favorite-posts/<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;lastmod&gt;</span>2012-02-07T20:59:36+00:00<span class="nt">&lt;/lastmod&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.6<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}/about/<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;lastmod&gt;</span>2012-02-07T20:59:36+00:00<span class="nt">&lt;/lastmod&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.6<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}/my-photo-gear/<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;lastmod&gt;</span>2012-09-07T20:59:36+00:00<span class="nt">&lt;/lastmod&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.6<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% for post in site.posts  %}
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ post.url }}<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;lastmod&gt;</span>{{ post.date | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>monthly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.2<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% endfor %}
<span class="nt">&lt;/urlset&gt;</span> </code></pre></figure> <h2 id="a-idatomaatom-feed"><a id="atom"></a>Atom Feed</h2> <p>I started with <a href="http://vitobotta.com/how-to-migrate-from-wordpress-to-jekyll/#atom-rss-feed">this simple Jekyll feed</a> in order to create a custom Atom Feed that looks like this:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"> 
<span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;feed</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2005/Atom"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;title&gt;</span><span class="cp">&lt;![CDATA[{{ site.title }}]]&gt;</span><span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;subtitle&gt;</span><span class="cp">&lt;![CDATA[{{ site.subtitle }}]]&gt;</span><span class="nt">&lt;/subtitle&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{{ site.url }}/atom.xml"</span> <span class="na">rel=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{{ site.url }}/"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;updated&gt;</span>{{ site.time | date_to_xmlschema }}<span class="nt">&lt;/updated&gt;</span>
  <span class="nt">&lt;id&gt;</span>{{ site.url }}/<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;author&gt;</span>
    <span class="nt">&lt;name&gt;</span><span class="cp">&lt;![CDATA[{{ site.author | strip_html }}]]&gt;</span><span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;/author&gt;</span>
  <span class="nt">&lt;rights&gt;</span>Copyright (c) 2007-2012 {{ site.author | strip_html}}<span class="nt">&lt;/rights&gt;</span>
  {% for post in site.posts limit: 10 %}
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;title</span> <span class="na">type=</span><span class="s">"html"</span><span class="nt">&gt;</span><span class="cp">&lt;![CDATA[{{ post.title | cdata_escape }}]]&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{{ site.url }}{{ post.url }}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;updated&gt;</span>{{ post.date | date_to_xmlschema }}<span class="nt">&lt;/updated&gt;</span>
    <span class="nt">&lt;id&gt;</span>{{ site.url }}{{ post.id }}<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;content</span> <span class="na">type=</span><span class="s">"html"</span><span class="nt">&gt;</span><span class="cp">&lt;![CDATA[{{ post.content | expand_urls: site.url | cdata_escape }}]]&gt;</span><span class="nt">&lt;/content&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  {% endfor %}
<span class="nt">&lt;/feed&gt;</span> </code></pre></figure> <h2 id="a-idsidebarstatearetaining-sidebar-collapsed-state"><a id="sidebar_state"></a>Retaining Sidebar Collapsed State</h2> <p>The default template for Octopress includes a nifty sidebar that can be collapsed. To improve that functionality, I included the <a href="https://github.com/carhartl/jquery-cookie">jQuery Cookie plugin</a> and edited the addSidebarToggler function in octopress.js like so:</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">addSidebarToggler</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'sidebar-footer'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'#content'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;span class="toggle-sidebar"&gt;&lt;/span&gt;'</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.toggle-sidebar'</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'collapse-sidebar'</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">'collapse-sidebar'</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">"resize"</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'sidebar_collapsed'</span><span class="p">,</span> <span class="s2">"0"</span><span class="p">,</span> <span class="p">{</span> <span class="na">expires</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/'</span><span class="p">,</span> <span class="na">raw</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'collapse-sidebar'</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">"resize"</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'sidebar_collapsed'</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">,</span> <span class="p">{</span> <span class="na">expires</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/'</span><span class="p">,</span> <span class="na">raw</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">...</span>
<span class="p">}</span></code></pre></figure> <p>Additionally I added the following code:</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s2">"sidebar_collapsed"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">raw</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"body"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"collapse-sidebar"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"body"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"collapse-sidebar"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span></code></pre></figure> </div> <section> <h1>Comments</h1> <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </section> <div class="related"> <h2>Related Posts</h2> <ul class="related-posts"> <li> <h3> <a href="/the-bear-was-that-baby-on-the-plane/"> The Bear Was THAT Baby On The Plane <small>Apr 12</small> </a> </h3> </li> <li> <h3> <a href="/sickness-strikes-again/"> Sickness Strikes Again <small>Feb 19</small> </a> </h3> </li> <li> <h3> <a href="/the-sickness-is-strong-in-this-one/"> The Sickness Is Strong In This One <small>Jan 29</small> </a> </h3> </li> </ul> </div> </div> </div> </div> <label for="sidebar-checkbox" class="sidebar-toggle"></label> <script>(function(b){var a=b.querySelector(".sidebar-toggle");var d=b.querySelector("#sidebar");var c=b.querySelector("#sidebar-checkbox");b.addEventListener("click",function(g){var f=g.target;if(!c.checked||d.contains(f)||(f===c||f===a)){return;}c.checked=false;},false);})(document);</script> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/galleria/1.3.5/galleria.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.4.33/jquery.colorbox-min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.wookmark/1.3.1/jquery.wookmark.min.js"></script> <script type="text/javascript">jQuery(document).ready(function(){if(jQuery(".galleria")[0]){jQuery(".galleria,.galleria_container").css("height",600);Galleria.loadTheme("//cdnjs.cloudflare.com/ajax/libs/galleria/1.3.5/themes/classic/galleria.classic.min.js");Galleria.run(".galleria",{lightbox:true,showInfo:true});}});jQuery(document).ready(function(){var a=jQuery("#wookmark");if(a.length){var b=jQuery("#tiles li");jQuery("a",b).addClass("gal").colorbox({rel:"gal",maxWidth:"80%",maxHeight:"90%"});jQuery("#tiles").imagesLoaded(function(){b.wookmark({autoResize:true,container:a,offset:4,itemWidth:200});a.fadeIn();});}});</script> <script src="//goingthewongway.disqus.com/embed.js" async></script> <script>a("http://www.statcounter.com/counter/counter.js");</script><noscript><div class="statcounter"><img class="statcounter" src="http://c.statcounter.com/2375202/0/1b55b1d6/1/" alt="hit"/></div></noscript> </body> </html>